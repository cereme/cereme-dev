{"componentChunkName":"component---src-templates-blog-post-js","path":"/backend/aws-lambda-cloudwatch-event-cronjob/","result":{"data":{"site":{"siteMetadata":{"title":"cereme.dev","author":"cereme","siteUrl":"https://cereme.dev","comment":{"disqusShortName":"","utterances":"cereme/cereme.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"671719f5-7f3c-5b09-9e51-e2bf7c4db83f","excerpt":"이렇게 일주일에 한 번 업데이트되는 식단표를 슬랙에 공유하고 싶었다. image 물론 온라인으로 식단표를 공유하지 않는 식당은 이렇게 사진으로 찍어서 올리는 수밖에 없지만… 마침 옮기게 된 사무실 주변에 있는 국립국악원 구내식당은 온라인으로 식단표를 제공했다! 매주 월요일 아침마다 식단표를 긁어올 수 있게 AWS Lambda와 Cloudwatch를 구성해보자. Lambda 함수 만들기  Slack의 Incoming Webhook을 KMS Encrypt…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 448px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQ4y2VUCXLiMBDM/7+zmyekUlvhSEggBAO+sY0P7oCxobdbxBRUKMYayaOenpbGD8vlEkWxwG67wSwM4TkufNdBHMdI4gjr1Qr772+cTjVOdXWxW7+uUXMsy9LYw263gzW24HoB+sMpPgYWPj4tDMcOBiMHEyfA1J3Bj7IfS+HNLmMQ5/RTRPMCh8MB+/0eD0LdbrdIswXGbgTLDvBpuXC5yaF50cXcMOVaCiecY+InlzXFcD1MCrL7AdSjPJT4ZlmLIkeezhEGAXZcP9VHU86ZJfLB/8n4KrU68l11MfliKDOActbrNaqqQvM7n89m3Gw2mM+ZhPpK1zTNyOSA259ilcxo2ABqo8baiHyxE4OURJJI66Jg2fYEoW9fq9J6XV1i7wD1Ik0pNMt1HBue5xl/Op2add/3kSQJ+m9vsEdfGI/H6Pf7+KJvWSOT9MjSr4Ba0BWSTScTU55AtbFYFEziGFm+RiPOF3Bd18iQZamJE6E7hgJcESxnsM2AiLqJWUJgJfED38gi1gvGiPFsNrvqq/J/abiiLaMIeaeD9XCIiL5MgBpXvORiJkDNlVD7llzfkuHxjqFe0NYsbfb3D5ZPT0ipWUgWDYCqEBsBmxPPcxzCGHve3d16g/JOwwZQbff4iN2/fyi4IaOJoW1PDZC01Fylz8nQALKTfgMy+4KBLk8s6vUQ0D4HA4w4L4rCsGxugmKVTJqXJS+1LnbTy7eAOkWXB+KzTJeiS3gxcj0XudhmGcFzcxDyzaFRlpgfEWGYa9M0tQAV1Ou94f39He1WC51uB+12G91ul9bB62sXrXYLLy8veH5+5vwVNu9sksQ4sHsMw6Y71BEyZWk+RfIba+bVsbqu3bZq01X/AWNquMm4+fyYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/12371f281c9099b34c78500d5ecf4457/33b38/yoshi_slack.png\"\n        srcset=\"/static/12371f281c9099b34c78500d5ecf4457/5a46d/yoshi_slack.png 300w,\n/static/12371f281c9099b34c78500d5ecf4457/33b38/yoshi_slack.png 448w\"\n        sizes=\"(max-width: 448px) 100vw, 448px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이렇게 일주일에 한 번 업데이트되는 식단표를 슬랙에 공유하고 싶었다.</p>\n<p><img src=\"/images/slack_menu.PNG\" alt=\"image\"></p>\n<p>물론 온라인으로 식단표를 공유하지 않는 식당은 이렇게 사진으로 찍어서 올리는 수밖에 없지만…</p>\n<p>마침 옮기게 된 사무실 주변에 있는 국립국악원 구내식당은 온라인으로 식단표를 제공했다!</p>\n<p>매주 월요일 아침마다 식단표를 긁어올 수 있게 AWS Lambda와 Cloudwatch를 구성해보자.</p>\n<h2 id=\"lambda-함수-만들기\" style=\"position:relative;\"><a href=\"#lambda-%ED%95%A8%EC%88%98-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"lambda 함수 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambda 함수 만들기</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1172px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABW0lEQVQoz21S2XKDMAz0//9dn5qXZhqnLQGfsuQzhlROj6HHsmjweg0aVuLxcDjKV6X1opS2FkL4Jn4hMHDH+5J1AQBjG4MHYKHs4DBeXFgADWYXy47VxqIgCfCQh7P23m8/sBlMBzk9z+7FoqI2h3IJeVSfXn2WLolAZdvW3lfGz8O3yeLD02zLavI3+6ip27Kp2ATw6VJyyYy0I2uzxeMElrLGxJ3/ogpRnM9nC1hq/cvWWu+t8vU/m1jU4iG0Wvt1oPfruuf1E6yz4cPTvkRhPWoHQDGmnFJygZQnBVHBeFg8BYpMj6MCjiV7kYgpJu0nA3J2NsR17WeXjrZIX5knV09w5WBmSJaK54Soxtq54zDSRcEhR34XEf8y7uvi6DQbuViusydoG+ZqjbF8a+29X/vKbcOYExQU073lzDmz+uZQmiB1kAYvoUxYHaX7FBEPE9vYw0l8fPkdRKd1G3Jc50wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/9d076ff6dc8d697da37c708b5be36efc/511f0/slack_lambda.png\"\n        srcset=\"/static/9d076ff6dc8d697da37c708b5be36efc/5a46d/slack_lambda.png 300w,\n/static/9d076ff6dc8d697da37c708b5be36efc/0a47e/slack_lambda.png 600w,\n/static/9d076ff6dc8d697da37c708b5be36efc/511f0/slack_lambda.png 1172w\"\n        sizes=\"(max-width: 1172px) 100vw, 1172px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Slack의 Incoming Webhook을 KMS Encrypt해서 저 블루프린트를 채우는 과정은 다음 글을 참고하면 좋다.</p>\n<p><a href=\"https://ngee.tistory.com/1449\">(다시쓰는) AWS CloudWatch Alarm Writing to Slack Using Lambda by ngee</a></p>\n<p><a href=\"https://ngee.tistory.com/1139\">Lambda로 Slack에 메세지 작성하기를 위한 key 생성 및 URL 암호화</a></p>\n<p>그리고 우리는 Cloudwatch 로그를 전송할것이 아니므로, 관련 소스코드를 삭제한 후,</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">def <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    base_url <span class=\"token operator\">=</span> <span class=\"token string\">'http://www.gugak.go.kr'</span>\n    page_source <span class=\"token operator\">=</span> <span class=\"token function\">urlopen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.gugak.go.kr/site/homepage/menu/food'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\n    \n    img_url <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span><span class=\"token function\">compile</span><span class=\"token punctuation\">(</span>r<span class=\"token string\">'&lt;img src=\\\"(.*)\\\" alt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span>page_source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    \n    logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>base_url <span class=\"token operator\">+</span> img_url<span class=\"token punctuation\">)</span>\n\n    slack_message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'channel'</span><span class=\"token operator\">:</span> <span class=\"token constant\">SLACK_CHANNEL</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"text\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"http://www.gugak.go.kr/site/homepage/menu/food\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"attachments\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"image_url\"</span><span class=\"token operator\">:</span> base_url <span class=\"token operator\">+</span> img_url<span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"thumb_url\"</span><span class=\"token operator\">:</span> base_url <span class=\"token operator\">+</span> img_url\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n        \n    <span class=\"token punctuation\">}</span>\n\n    req <span class=\"token operator\">=</span> <span class=\"token function\">Request</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HOOK_URL</span><span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">.</span><span class=\"token function\">dumps</span><span class=\"token punctuation\">(</span>slack_message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token operator\">:</span>\n        response <span class=\"token operator\">=</span> <span class=\"token function\">urlopen</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span>\n        response<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Message posted to %s\"</span><span class=\"token punctuation\">,</span> slack_message<span class=\"token punctuation\">[</span><span class=\"token string\">'channel'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    except HTTPError <span class=\"token keyword\">as</span> e<span class=\"token operator\">:</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Request failed: %d %s\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span>\n    except URLError <span class=\"token keyword\">as</span> e<span class=\"token operator\">:</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server connection failed: %s\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이런식으로 짜준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 213px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABG0lEQVQoz42QX0+DMBTF+f6fyPjkA8nMIEt07gEdA+lwYGH8py0Ujm0dmTHRrEmT5tzfPT33Wvh15nnGLdpfx1o/ruAfQpxSioPvIwjf0fQCq1eKDSmRdYMBJ2U6/3OXj63d9hkROaKoahwJQfpJMYwT1v4ZLqlQsvGmZIupJcYRTAiMUqLrexRlBS64Ri7khFbpPWNgXBi2aVvUTYNOaaPql3K6JiQkAmPCCEEQwLZt846iAHf3DxgUPKim3csWjuuamud5cB1H1STS0xHO5ulq2HatSvRtSCnF234POU0oihzxR2refBhwzjPEcWy4JEkQhiGE0uu6As3yyzzKUIvakHFuAD26Hu3nbnRdp9HmmtOJ9V2CLJxe4xdgkx0ljfMOkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/ebe7b6f58ca6e5e4835c6881029baada/3cb16/slack_lambda_timeout.png\"\n        srcset=\"/static/ebe7b6f58ca6e5e4835c6881029baada/3cb16/slack_lambda_timeout.png 213w\"\n        sizes=\"(max-width: 213px) 100vw, 213px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>인터넷 리소스에 접근하는 코드이기때문에 Lambda의 기본 타임아웃(3초)은 초과할 수 있다. 넉넉하게 Timeout을 늘려주자.</p>\n<h2 id=\"cloudwatch-event-by-cron-expression\" style=\"position:relative;\"><a href=\"#cloudwatch-event-by-cron-expression\" aria-label=\"cloudwatch event by cron expression permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloudwatch Event by cron expression</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 180px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 228.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAuCAIAAACnCq6RAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADb0lEQVRIx6VWaXPiRhD1382v2qp8zZekklRc9q6xF1jAZo2JF+viECB0GB2jaySNZqT0CGI7tQtITpeKUol56tfXa52VZWGZ5nq1dpEXRtFsPpUlUVVXq9Xa0A3TMEuwoih/ZGdlyaay3Ot+GQ77N53u+cVF5+aqddX6/fxyMLh9uB9V4PIQ+P3GwcixNW3jB4GHkGWZrus5jnOA6XfguTj5+LElKIooSv1eVxDF8XicZuRwsNwYYzvaRZIkrChykrPKCriOuoYzaZZxMMbYcZ3ARxgnlbfTjCmlZAeWhAnkedAHwnJNMBwJkVt5jiPXQ3meE5LXzDN4hvNnLzEQQhijEOxxGBxzHBchlKbpHozj2PPgkZdl2Z4Wv9jbdO/CQchfLFRNW5MXz/AcXLKDvfSfPPu+Dzl+7TAaWkR/yp0NseQcmTS2yVZJ5124P9rb1R+ZJYQPvyWaHEutdDEk3hJLLSxdZqZ8fDD+R2/v0iC7s54xWaC1Hjo1S/0KVtGybzzeGmMtagJ+KQOkMae0KIvGtNX5bHB71+190U29Me2tZYiSYm+3yEdNaReM06YwkkVlDZREFIS/v437vc7NdbfT7dhOXeccHAShYZrPlgFm23ZcTXW9mBktaQJ+aDVm9TlzMI2eM+lPUOjO5/anVmu6XDVIGEsCajyAYs4XyziOPOS/gE++Yt8kOc2BfxzjKIpwAlGwJE1BpY7j93WeSuK38ej88tPN9fXkSTQ368ur65kiu2+IHPQMvZmlKehJAgqKMWgNlCAIgjTNTtDGOA7CKOG4pCwbNPdeeu9HY99HqrrkLGA83tgJcBiAKvkRN9x40YEB5TiMIFQf+WEYwrvqaPg+28u58vg4UebK17uhIAifO21NN0+Weu8ZtlYYRnwDcctoZbVou45tu56PPMh5/d78dz/PlPv70WjYf5LmTcFcv6KIt0SM35Xtt7vzPeBGk/wK9lx7pWkwj6AnzvZZ0zfQ46ZpQcOfBlvGRpJlKBWA9c16oao4SQEM2/40mOWEVef4t0ylRrv7WmIQZew54F9CGLqDFVnOEsLgl7d9ksNNnNLiEPjntvbTh8nVSP9wobbF7S/t1V8P286TvQ2yXwebu6n7x63uJ/T7WnDwyk6+qgEKUwV2ZJitt9iNiBeTlDA/zuAXHmb5D3z/A98KdU7ZMuSSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/62a65038031c4dcec74f36a89022d0ac/e9ff0/slack_cloudwatch.png\"\n        srcset=\"/static/62a65038031c4dcec74f36a89022d0ac/e9ff0/slack_cloudwatch.png 180w\"\n        sizes=\"(max-width: 180px) 100vw, 180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Cloudwatch > 이벤트 > 규칙에 들어가서 “규칙생성” 버튼을 누른다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 770px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA9klEQVQoz5WSjW6EIBCEff/HxAJqVP4WFATbUS5NL+WSuy+aLGQnywx0fd8vy6KVOo4j55xSOm7SDYoYYynlu0VHzmmglCOyd+29J0fYQW2tXdc1xdgW51LMhZ6VHRU0K3bOP6AJ/9miO0sOwWujV9WGiHCW7ZkQwrbt3aSDsQ7Gwg364DC/R7fHKxhUNaQaG4CTeZlhGN5rQ0NcXf1Sl56Ic4Hvi3PGmBCiHdgrMaRSDpzznjEUn4mlEFLKazhjw/CJ2FnHb8Tj2LItrgnVl7SnvMUjlxNvYxwnTJ6mCYYxuTxf/uOejTUVi3F+17SHLZV/NNP+AVyCubGn2PrwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/06ba66cd9fa1c89368e5721a67486334/f4b77/slack_cloudwatch_cron.png\"\n        srcset=\"/static/06ba66cd9fa1c89368e5721a67486334/5a46d/slack_cloudwatch_cron.png 300w,\n/static/06ba66cd9fa1c89368e5721a67486334/0a47e/slack_cloudwatch_cron.png 600w,\n/static/06ba66cd9fa1c89368e5721a67486334/f4b77/slack_cloudwatch_cron.png 770w\"\n        sizes=\"(max-width: 770px) 100vw, 770px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>2019/03/18 수정</strong></p>\n<p><strong>KST는 GMT+9니까, GMT-9를 입력해줘야죠… KST 09:00:00을 표현하고싶으면 GMT 00:00:00을 설정하는게 맞습니다…</strong></p>\n<p>그리고 이렇게 cron expression을 입력하면 어떤 시점들이 트리거되는지 리스트로 보여준다. 밑에 “자세히 알아보십시오”를 누르면 식을 어떻게 작성해야되는지 나와있으니 참조하자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 770px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQoz52Q0Q6DIAxF+f+v9MU4M0AIsCgoHZesBI0PZk1OWqC9LRXbFmnfd0op/ejiGKuPMbW74zgIlnOmOxPLspDWmqy1BUPOOTLljr0xpr7Dg3Vdm2APNxOvaaIQwm0Sg0TAMX7UE8tP5nkmpRQJHNjQXUpZCeFTi9H5KnAFOaitE0r5rsoQ5tGvu3oC5wvsznvfHnp7KsaC8GIYBhrHsYy8nfb1D6j/Ai8AJj0/IgJhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/c210d484574bd4867d47604d16cecca0/f4b77/slack_cloudwatch_lambda.png\"\n        srcset=\"/static/c210d484574bd4867d47604d16cecca0/5a46d/slack_cloudwatch_lambda.png 300w,\n/static/c210d484574bd4867d47604d16cecca0/0a47e/slack_cloudwatch_lambda.png 600w,\n/static/c210d484574bd4867d47604d16cecca0/f4b77/slack_cloudwatch_lambda.png 770w\"\n        sizes=\"(max-width: 770px) 100vw, 770px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>그리고 아까 Lambda에서 만들었던 함수를 연결시켜주면 된다.</p>\n<h2 id=\"끝\" style=\"position:relative;\"><a href=\"#%EB%81%9D\" aria-label=\"끝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>끝!</h2>\n<p>slack message의 attachments에 image link를 넣어서 그런지 간헐적으로? 이미지가 보이지 않는다… (계속 하면 가끔 됐다 안됐다 랜덤으로 재현됨…)</p>\n<p>lambda에서 사진 데이터를 다운로드 받은 후 S3에 올려서 Slack에 link를 넘겨주면 해결될 것 같긴 한데 아직 시도는 못해봤다.</p>","frontmatter":{"title":"AWS Lambda와 Cloudwatch의 Event를 통해 주기적으로 Lambda 함수 실행하기","date":"2019-03-13"}}},"pageContext":{"slug":"/backend/aws-lambda-cloudwatch-event-cronjob/","previous":{"fields":{"slug":"/frontend/javascript-replace-is-not-replaceall/"},"frontmatter":{"title":"Javascript replace 는 replaceAll이 아니다(feat.regex)","category":"frontend","draft":false}},"next":{"fields":{"slug":"/frontend/vue-cli-3-ie-polyfill/"},"frontmatter":{"title":"Vue cli 3에서 IE11 Polyfill 하기","category":"frontend","draft":false}}}}}